<html>
<head>
	<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
	<link rel="stylesheet" href="searchbox.css">
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script src="bower_components/jquery.smoothdivscroll/js/jquery.mousewheel.min.js" type="text/javascript"></script>
	<script src="bower_components/jquery.smoothdivscroll/js/jquery.kinetic.min.js" type="text/javascript"></script>
	<script src="bower_components/jquery.smoothdivscroll/js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
	<script src="searchbox.js"></script>
	<script>
		(function() {

			'use strict';

			var lxUi = angular.module('lx-ui', [])
				.directive('lxTagSearchbox', function() {
					return {
						scope: {
							model: '=ngModel',
							uiData: '=',
						},
						replace: true,
						restrict: 'E',
						templateUrl: 'lx-tag-searchbox.html',
						transclude: true,
						controller: [
							'$scope', '$attrs', '$element', '$timeout', '$filter',
							function ($scope, $attrs, $element, $timeout, $filter) {

								$scope.placeholder = $attrs.placeholder || 'Search...';
								$scope.width = $attrs.width || '350px';
								$scope.inactiveWidth = $attrs.inactiveWidth || $scope.width;
								$scope.iconClassSearch = $attrs.iconSearch || 'search';
								$scope.iconClassRemove = $attrs.iconRemove || 'remove';
								$scope.iconClassTrash = $attrs.iconTrash || 'trash';

								$scope.searchParams = []; // Do we want this to be a list or an object?
								$scope.searchQuery = ''; // Is this necessary? Can it be merged with above?
								$scope.setSearchFocus = false; // Is this needed?

								$scope.$watch('searchParams', function() { });
								$scope.$watch('searchQuery', function() { }, true);

								$scope.enterEditMode = function() {} // Edit a tag
								$scope.leaveEditMode = function() {} // Stop Editing a tag
								$scope.typeaheadOnSelect = function() {} // ??
								$scope.addSearchParam = function() {} // -
								$scope.removeSearchParam = function() {} // -
								$scope.removeAllSearchParams = function() {} // clears the search box
								$scope.editPrevious = function() {} // Edit next param
								$scope.editNext = function() {} // Edit previous param
								$scope.keyDown = function(e, searchParamIndex) {} // Handle Keypresses. Can we do with another library?
								$scope.getInputStyle = function() { // Controls flexible properties for the outer element
									return {
										width: $scope.focus || $scope.searchParams.length ? $scope.width : $scope.inactiveWidth
									}
								}
								
								function restoreModel() {} // ??
								function updateModel() {} // ??
								function getCurrentCaretPosition() {} // ??

							}
						]
					};
				})
				// .directive('lxHorizontalTicker', function() {
				// 	return {
				// 		scope: {},
				// 	}
				// })
		
			lxUi.run(['$templateCache', function($templateCache) {
				'use strict';
				$templateCache.put('lx-tag-searchbox.html', 
					'<div class=lxSearchboxWrapper ng-style=getInputStyle() ng-init="focus = false">' +
						'<div class=lxSearchboxInput>' +
							'<span ng-show="searchParams.length < 1 && searchQuery.length === 0" class="search-icon glyphicon" ng-class="\'glyphicon-\' + iconClassSearch"></span>' +
							'<a ng-show="searchParams.length > 0 || searchQuery.length > 0" ng-click=removeAllSearchParams() role=button class="search-icon">' +
								'<span class="search glyphicon" ng-class="\'glyphicon-\' + iconClassTrash"></span>' +
							'</a>' +
							'<div class=lxSearchParameter ng-repeat="searchParam in SearchParams">' +
								'<a ng-click=removeSearchParam($index) role=button>' +
									'<span class="remove glyphicon" ng-class="\'glyphicon-\' + iconClassRemove"></span>' +
								'</a>' +
								'<div class=key>{{searchParam.name}}:</div>' +
								'<div class=value>' +
									'<span ng-show = !searchParam.editMode ng-click=enterEditMode($index)>{{searchParam.value}}</span>' +
									'<input ng-show=searchParam.editMode ng-model=searchParam.value placeholder=searchParam.placeholder name=value ng-keydown="keydown($event, $index)" ng-blur=leaveEditMode($index) />' +
								'</div>' +
							'</div>' +
							'<input ng-model=searchQuery name=searchbox class=lxSearchboxInputBox ng-keydown=keydown($event) placeholder={{placeholder}} ng-focus="focus = true" ng-blur="focus = false" />' +
						'</div>' +
						'<div class=lxSearchboxData ng-class={active:focus}>' +
							'Here is a filtered list of results' +
						'</div>' +
					'</div>'
				);
			}]);

		})();


	</script>
	<script>
		var app = angular.module('myModule', ['ui.bootstrap', 'angular-advanced-searchbox', 'lx-ui']);
		app.controller('DemoController', function($scope) {
			$scope.availableSearchParams = [
				{key: 'name', name: 'NAME', placeholder: 'Name...', multi: false},
				{key: 'type', name: 'TYPE', placeholder: 'Type...', multi: true, suggestions: ['Human', 'Robot', 'Vegetable', 'AI']},
				{key: 'colour', name: 'COLOUR', placeholder: 'Colour...', multi: true},
				{key: 'ogdoad', name: 'ogdoad', placeholder: 'ogdoad...', multi: false},
				{key: 'cyanophyceous', name: 'cyanophyceous', placeholder: 'cyanophyceous...', multi: false},
				{key: 'fireflaught', name: 'fireflaught', placeholder: 'fireflaught...', multi: false},
				{key: 'Ginny', name: 'Ginny', placeholder: 'Ginny...', multi: false},
				{key: 'Caitanyas', name: 'Caitanyas', placeholder: 'Caitanyas...', multi: false},
				{key: 'disgustfulness', name: 'disgustfulness', placeholder: 'disgustfulness...', multi: false},
				{key: 'gemination', name: 'gemination', placeholder: 'gemination...', multi: false},
				{key: 'reseed', name: 'reseed', placeholder: 'reseed...', multi: false},
				{key: 'latigo', name: 'latigo', placeholder: 'latigo...', multi: false},
				{key: 'phototactic', name: 'phototactic', placeholder: 'phototactic...', multi: false},
				{key: 'Paludicella', name: 'Paludicella', placeholder: 'Paludicella...', multi: false},
				{key: 'Masonite', name: 'Masonite', placeholder: 'Masonite...', multi: false},
				{key: 'Beaumontia', name: 'ogdoad', placeholder: 'ogdoad...', multi: false},
				{key: 'benzalphenylhydrazone', name: 'latigo', placeholder: 'latigo...', multi: false},
				{key: 'dudishness', name: 'phototactic', placeholder: 'phototactic...', multi: false},
				{key: 'sizy', name: 'Paludicella', placeholder: 'Paludicella...', multi: false},
				{key: 'hyponeuria', name: 'Masonite', placeholder: 'Masonite...', multi: false},
				{key: 'image', name: 'IMAGE', placeholder: 'Image...', multi: true}
			]
			$scope.data = [
				{name: 'Alex', type: 'Human', color: 'Purple'},
				{name: 'C34', type: 'Robot', color: 'Purple'},
				{name: 'C54', type: 'Robot', color: 'Red'},
				{name: 'C987', type: 'Robot', color: 'Red'},
				{name: 'Gene', type: 'Human', color: 'Red'},
				{name: 'Simon', type: 'Human', color: 'Red'},
				{name: 'Stanley', type: 'Human', color: 'Red'},
				{name: 'Cucumber', type: 'Vegetable', color: 'Green'},
				{name: 'Siri', type: 'AI', color: 'Yellow'}
			]
			
			console.table($scope.availableSearchParams);
		})
	</script>
</head>
<body ng-app="myModule" ng-controller="DemoController">
	<nit-advanced-searchbox ng-model="searchParams" parameters="availableSearchParams" list="data" placeholder="StackSearch..."width="450"inactive-width="250">
		<div ng-repeat="item in data | limitTo: 10" ng-click="selectNode(node, true)">
			<div>{{item.name}}</div>
			<div>{{item.type}}</div>
		</div>
		<div><div colspan='2' style='text-align: center'>{{ (clusterdata.nodes | filter:filterNodes ).length - 10 }} More...</div></div>
		<div><div colspan='2' style='text-align: center'>0 / {{clusterdata.nodes.length}} results matching "{{AVOSSearchText}}"</div></div>
		<div class="row">
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		  <div class="col-md-1">.col-md-1</div>
		</div>
		<div class="row">
		  <div class="col-md-8">.col-md-8</div>
		  <div class="col-md-4">.col-md-4</div>
		</div>
		<div class="row">
		  <div class="col-md-4">.col-md-4</div>
		  <div class="col-md-4">.col-md-4</div>
		  <div class="col-md-4">.col-md-4</div>
		</div>
		<div class="row">
		  <div class="col-md-6">.col-md-6</div>
		  <div class="col-md-6">.col-md-6</div>
		</div>
	</nit-advanced-searchbox>

<!-- 	<horizontal-scroller style="position: absolute; bottom: 10px; width: 500px;">
		<span class="title">Suggestions:</span>
		<span class="search-parameter" ng-repeat="param in availableSearchParams" ng-click="alert()">{{param.name}}</span>
	</horizontal-scroller> -->

<!-- 	<div class="advancedSearchBox search-parameter-suggestions " style="position: absolute; bottom: 10px;">
		<span class="title">Suggestions:</span>
		<span class="search-parameter" ng-repeat="param in availableSearchParams | limitTo:8" ng-mousedown="addSearchParam(currentSearchParam, suggestion, false)">{{param.name}}</span>
	</div> -->

<lx-tag-searchbox ui-data="data" style="position: absolute; right: 0; top: 0;"></lx-tag-searchbox>


</body>
</html>